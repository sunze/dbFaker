<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.8/dist/htmx.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <title>HTMX 示例 - 数据库管理</title>
</head>

<!-- 页面主背景改为同色系浅青绿色，保留内边距和最小高度 -->
<body class="bg-[#f0f7f5] min-h-screen py-10 px-6">
<header class="bg-[#2a6a5d] text-white">
    <div class="max-w-7xl mx-auto px-6 py-2 flex items-center">
        <!-- Logo区域（模拟） -->
        <div class="flex items-center gap-2 font-semibold text-lg">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7" />
            </svg>
            <span>数据工具</span>
        </div>
        <!-- 导航选项（仅保留“数据生成”“数据集”） -->
        <nav class="flex items-center gap-6 ml-8">
            <a href="/" class="px-2 py-1 text-white hover:text-[#cfeee0] transition border-b-2 border-white">数据生成</a>
            <a href="dataset" class="px-2 py-1 text-[#cfeee0] hover:text-white transition border-b-2 border-transparent">数据集</a>
        </nav>
        <!-- 右侧功能按钮（简化） -->
        <div class="flex items-center gap-4">
            <button class="text-white hover:text-[#cfeee0] transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                </svg>
            </button>
            <button class="text-white hover:text-[#cfeee0] transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
            </button>
        </div>
    </div>
</header>
<!-- 主容器改为同色系深一点的背景，边框适配色系 -->
<div class="max-w-7xl mx-auto bg-[#f8fcfb] rounded-xl shadow-sm border border-[#d1e9e4] overflow-hidden">

    <!-- Header：背景和主容器一致，边框改为同色系浅绿 -->
    <div class="bg-[#f8fcfb] border-b border-[#d1e9e4] px-8 py-6">
        <h1 class="text-2xl font-bold text-[#1f4f46] flex items-center gap-3">
            <!-- 标题图标背景改为同色系浅青，颜色改为深主色 -->
            <div class="p-2 bg-[#e6f5f2] rounded-lg">
                <svg xmlns="http://www.w3.org/2000/svg"
                     class="h-6 w-6 text-[#1f4f46]"
                     fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7
                             M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4
                             M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"/>
                </svg>
            </div>
            数据库测试数据生成
        </h1>
    </div>

    <!-- Content：保留内边距和间距，文字色适配 -->
    <div class="px-8 py-6 space-y-8 text-[#2d5f56]">

        <!-- 操作区：保留网格布局，仅调整文字和组件配色 -->
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-6 items-end">

            <div class="lg:col-span-4 space-y-2">
                <label for="table-select"
                       class="block text-sm font-semibold text-[#2d5f56] uppercase tracking-wider">
                    目标数据库表
                </label>

                <!-- 下拉框：边框、聚焦态改为同色系，背景和主容器一致 -->
                <select id="table-select"
                        name="table"
                        class="w-full border border-[#d1e9e4] rounded-lg px-4 py-2.5 bg-[#f8fcfb]
                               focus:outline-none focus:ring-2 focus:ring-[#5fb878]/20
                               focus:border-[#5fb878] transition-all appearance-none"
                        hx-get="/api/tables"
                        hx-trigger="load"
                        hx-swap="innerHTML">
                    <option>正在获取表列表...</option>
                </select>
            </div>

            <!-- 分析结构按钮：改为青绿色系，和底部按钮风格统一 -->
            <button
                    class="h-[42px] bg-[#5fb878] hover:bg-[#52a86d] text-white font-medium
                           px-6 rounded-lg transition-all active:scale-[0.98]
                           shadow-sm flex items-center justify-center gap-2"
                    hx-post="/api/table_info"
                    hx-include="#table-select"
                    hx-target="#submit-result"
                    hx-indicator="#loading-spinner"
            >
                <svg id="loading-spinner"
                     class="htmx-indicator animate-spin h-4 w-4 text-white"
                     xmlns="http://www.w3.org/2000/svg" fill="none"
                     viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10"
                            stroke="currentColor" stroke-width="4"/>
                    <path class="opacity-75" fill="currentColor"
                          d="M4 12a8 8 0 018-8V0
                             C5.373 0 0 5.373 0 12h4z"/>
                </svg>
                <span>分析结构</span>
            </button>
        </div>

        <!-- 结果区：保留间距，调整标题和容器配色 -->
        <div class="space-y-3">

            <div class="flex items-center gap-2 text-[#1f4f46] font-medium">
                <svg xmlns="http://www.w3.org/2000/svg"
                     class="h-5 w-5 text-[#5fb878]"
                     fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M9 17v-2m3 2v-4m3 4v-6m2 10H7
                             a2 2 0 01-2-2V5a2 2 0 012-2h5.586
                             a1 1 0 01.707.293l5.414 5.414
                             a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
                表结构详情
            </div>

            <!-- 表结构详情容器：背景、边框改为同色系，占位态文字色适配 -->
            <div id="submit-result"
                 class="bg-[#f8fcfb] rounded-xl border border-[#d1e9e4]
                        min-h-[420px] p-4
                        overflow-x-auto overflow-y-auto transition-all">

                <!-- 占位态：图标和文字色适配新风格 -->
                <div class="flex flex-col items-center justify-center h-[420px] text-[#6a988f]">
                    <svg class="w-12 h-12 mb-3 text-[#d1e9e4]"
                         fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                              d="M9 12h6m-6 4h6M5 6h14M5 6v12
                                 a2 2 0 002 2h10
                                 a2 2 0 002-2V6"/>
                    </svg>
                    <p class="text-sm">
                        请选择数据表并点击「分析结构」
                    </p>
                </div>
            </div>

            <!-- 底部工具栏：保留你之前的铺满样式，无需修改 -->
            <div class="flex items-center w-full mt-4 px-0 lg:px-0">
                <div class="flex items-center gap-3 bg-[#1f4f46] w-full px-4 py-3 rounded-lg justify-center">
                    <button
                            class="px-5 py-2 text-sm font-semibold uppercase
               bg-[#5fb878] text-white rounded-md
               hover:bg-[#52a86d]
               active:scale-[0.98]
               shadow-sm transition"
                            hx-post="/api/generate_data"
                            hx-include="#table-select"
                            hx-target="#submit-result"
                    >
                        生成数据
                    </button>

                    <button
                            class="px-5 py-2 text-sm font-semibold uppercase
               border border-[#5fb878]
               text-[#cfeee0]
               bg-transparent rounded-md
               hover:bg-[#2a6a5d]
               transition"
                            hx-post="/api/preview_data"
                            hx-include="#table-select"
                            hx-target="#submit-result"
                            id="preview-btn"
                    >
                        预览数据
                    </button>

                    <!-- 主页面底部工具栏中的“数据集”按钮 -->
                    <button
                            class="px-5 py-2 text-sm font-semibold uppercase
                bg-[#2a6a5d] text-white rounded-md
                hover:bg-[#1f4f46]
                active:scale-[0.98]
                shadow-sm transition"
                            onclick="window.location.href='dataset'"
                    >
                        数据集
                    </button>

                </div>
            </div>

        </div>
    </div>
</div>

<style>
    .htmx-indicator { display: none; }
    .htmx-request .htmx-indicator { display: inline; }
    .htmx-request span { opacity: 0.8; }
</style>

</body>
</html>